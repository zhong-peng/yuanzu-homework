"use strict";require(["config"],function(){require(["jquery","header","footer","template","tools","jquerycookie"],function(l,s,o,t,r){function e(s,o){s.focus(function(){s.css("border","1px solid blue")}),s.blur(function(){o.test(l(this).val())?(s.siblings().last().html(""),s.css("border","1px solid #d7d7d7")):(s.css("border","1px solid red"),s.siblings().last().html("<font color='red'>x输入有误</font>"))})}l("header").load("/html/component/header.html",function(){console.log("end")}),l("footer").load("/html/component/footer.html",function(){console.log("end")}),e(l("#tel2"),/^1\d{10}$/),e(l("#email"),/\w+@[a-z0-9]+\.[a-z]+/i),e(l("#password"),/^\w{6,}$/),l("#tel_input").focus(function(){l("#tel_input").css("border","1px solid blue")}),l("#tel_input").blur(function(){if(/^1\d{10}$/.test(l(this).val())){var s={tel_register:l("#tel_input").val()};l.ajax({method:"post",data:s,dataType:"json",url:"http://localhost/workplace/11.3/projectserver/api/register.php",success:function(s){"registered"===s.tel?(l("#tel_input").css("border","1px solid red"),l("#tel_input").siblings().last().html("<font color='red'>x该手机号已存在！</font>")):(l("#tel_input").siblings().last().html(""),l("#tel_input").css("border","1px solid #d7d7d7"))}})}else l("#tel_input").css("border","1px solid red"),l("#tel_input").siblings().last().html("<font color='red'>x输入有误</font>")}),l("#password2").focus(function(){l("#password2").css("border","1px solid blue")}),l("#password2").blur(function(){l("#password2").val()!==l("#password").val()?(l("#password2").css("border","1px solid red"),l("#password2").siblings().last().html("<font color='red'>x输入密码不同</font>")):(l("#password2").siblings().last().html(""),l("#password2").css("border","1px solid #d7d7d7"))}),l("#login_a").click(function(){l("#qr_login").css("display","block"),l("#qr_register").css("display","none"),l("#switch_bottom").css("left","447px")}),l("#register_a").click(function(){l("#qr_register").css("display","block"),l("#qr_login").css("display","none"),l("#switch_bottom").css("left","680px")});var n=r.$("#btn_register"),i=!0;n.onclick=function(s){console.log(11111111111),s=s||event;for(var o=r.$("input"),t=0;t<o.length;t++)"red"===o[t].style.borderColor&&(i=!1);if(""!==l("#tel_input").val()&&""!==l("#password").val()&&""!==l("#password2").val()||(i=!1),i){var e={tel:l("#tel_input").val(),email:l("#email").val(),password:l("#password").val(),birthday:l("#birthday").val()};l.ajax({method:"post",data:e,dataType:"json",url:"http://localhost/workplace/11.3/projectserver/api/register.php",success:function(s){console.log(s),"success"===s.isSucc&&(l("#qr_login").css("display","block"),l("#qr_register").css("display","none"),l("#switch_bottom").css("left","447px"))}})}return s.preventDefault(),!1},r.$("#btn_login").onclick=function(s){s=s||event;var o={username:l("#username").val(),password:l("#username2").val()};return l.ajax({method:"post",data:o,dataType:"json",url:"http://localhost/workplace/11.3/projectserver/api/login.php",success:function(s){console.log("register"),console.log(s),1===s.code?(l.cookie("username",o.username,{path:"/"}),l("#error").css("opacity",0),location.href="http://localhost:1807"):0===s.code&&l("#error").css("opacity",1)}}),s.preventDefault(),!1}})});