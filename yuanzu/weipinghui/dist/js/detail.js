"use strict";require(["config"],function(){require(["jquery","header","footer","template","tools","jquerycookie"],function(f,o,e,p,u){f("header").load("/html/component/header.html",function(){console.log("end"),o.welcome()}),f("footer").load("/html/component/footer.html",function(){console.log("end")});var t=location.search.slice(1).split("="),h={};h[t[0]]=t[1],f.ajax({url:"http://localhost/workplace/11.3/projectserver/api/detail.php",data:h,method:"POST",dataType:"json",success:function(o){if(1===o.code){var e=p("detil-template",{product:o.product});f("#container2").html(e);var t,l,n,c=f("#num").val();t=o.product.price,l=o.product.img3,n=o.product.strong,h.price=t,h._img=l,h.strong=n,h.checked="checked",console.log(h)}f("#plus").on("click",function(){console.log(111),c++,f("#num").val(c)}),f("#minus").on("click",function(){console.log(111),c--,f("#num").val(c)}),f("#btn_buy").click(function(o){var e=parseInt(f("#num").val());if(h.num=e,u.cookie("cart")){for(var t=u.cookie("cart"),l=JSON.parse(t),n=0;n<l.length;n++)if(l[n].id===h.id){l[n].num=l[n].num+e,console.log(222),console.log(l[n].num);break}n===l.length&&l.push(h);var c=JSON.stringify(l);f.cookie("cart",c,{path:"/"})}else{(l=[]).push(h),console.log(111),console.log(h);c=JSON.stringify(l);f.cookie("cart",c,{path:"/"})}window.location.href="http://localhost:1807/html/cart.html",o.preventDefault()});var i=u.$("#fdj_box"),s=u.$(".fdj")[0],a=u.$(".max_box")[0],r=u.$(".max_pic")[0];i.onmousemove=function(o){var e=(o=o||event).pageX-u.getPosition(i).left-s.offsetWidth/2,t=o.pageY-u.getPosition(i).top-s.offsetHeight/2;console.log(e,t),e<0&&(e=0),t<0&&(t=0),e>i.offsetWidth-s.offsetWidth&&(e=i.offsetWidth-s.offsetWidth),t>i.offsetHeight-s.offsetHeight&&(t=i.offsetHeight-s.offsetHeight),s.style.display="block",a.style.display="block",console.log(e,t),s.style.left=e+"px",s.style.top=t+"px",r.style.left=-3*e+"px",r.style.top=-3*t+"px"},i.onmouseleave=function(){s.style.display=a.style.display="none"}}})})});