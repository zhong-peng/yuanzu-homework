"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var c=e[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}require(["config"],function(){require(["jquery","header","footer","template","tools"],function(l,t,e,n,s){l("header").load("/html/component/header.html",function(){console.log("end"),t.welcome()}),l("footer").load("/html/component/footer.html",function(){console.log("end")});s.$("#cart_p_list");var c=s.cookie("cart"),a=JSON.parse(c);!function(){for(var t=0;t<a.length;t++){var e=s.$("#cart_p_list"),n=document.createElement("tr");n.className="tr_td",n.innerHTML='<td>\n\t\t\t\t\t\t\t\t<a href="">\n\t\t\t\t\t\t\t\t\t<img src="'.concat(a[t]._img,'" alt="" />\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<strong>').concat(a[t].strong,"</strong>\n\t\t\t\t\t\t\t\t<p>规格：<span>8号</span></p>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<strong>").concat(a[t].price,'</strong>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<form action="" id="').concat(a[t].id,'">\n\t\t\t\t\t\t\t\t\t<a class="reduce_p" href="javascript:;">-</a>\n\t\t\t\t\t\t\t\t\t<input type="text" name="" id="" class="amount" value="').concat(a[t].num,'" />\n\t\t\t\t\t\t\t\t\t<a class="add_p" href="javascript:;">+</a>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<a href="javacript:;" class="delete">移除</a></br></br>\n\t\t\t\t\t\t\t\t<input class="_input" type="checkbox" checked = "').concat(a[t].checked,'"/>\n\t\t\t\t\t\t\t</td>'),e.appendChild(n)}}(),l("#cart_p_list").on("click",".delete",function(){console.log(1111111);for(var t=s.cookie("cart"),e=JSON.parse(t),n=l(this).parent().siblings().eq(0).children().eq(1).html(),c=0;c<e.length;c++)e[c].strong==n&&e.splice(c,1);var a=JSON.stringify(e);l.cookie("cart",a,{path:"/"}),l(this).parent().parent().remove()}),l(".tr_td").on("click",function(t){for(var e=t.target,n=l(this).find(".amount").val(),c=s.cookie("cart"),a=JSON.parse(c),o=l(this).find("strong").html(),r=0;r<a.length;r++)if(a[r].strong==o&&("add_p"===e.className||"reduce_p"===e.className)){"add_p"===e.className&&(l(this).find(".amount").val(++n),a[r].num++),"reduce_p"===e.className&&(l(this).find(".amount").val(n<2?1:--n),a[r].num--);var i=JSON.stringify(a);l.cookie("cart",i,{path:"/"})}});var o=0,r=s.$("._input");l("#allinput").change(function(){if(this.checked){for(var t=0;t<r.length;t++)r[t].checked=!0;o=r.length}else{for(t=0;t<r.length;t++)r[t].checked=!1;o=0}});for(var i=0;i<r.length;i++)r[i].onchange=function(){this.checked?o++:o--,o===r.length?allinput.checked=!0:allinput.checked=!1};(new(function(){function e(){_classCallCheck(this,e);var t=s.cookie("cart");JSON.parse(t);this.checkbox=l("._input"),console.log(this.checkbox)}return _createClass(e,[{key:"calc",value:function(t){var e,n=this,c=s.cookie("cart"),a=JSON.parse(c),o=(t=t,0),r=0;a.forEach(function(t){t.strong===l(n).parents(".tr_td").find("strong").first().text()&&(e=t)}),e.checked?e.checked="":e.checked="checked",l.cookie("cart",JSON.stringify(a),{path:"/"}),console.log(e),a.forEach(function(t){t.checked&&(o+=t.num,r+=t.price*t.num)}),t.count(o,r)}},{key:"addEvent",value:function(){var t=this;this.allamount=0,this.allprice=0,this.checkbox.on("change",function(){t.calc.call(this,t)})}},{key:"count",value:function(t,e){l(".tongji").text(e),l("#allprice").text(e),l("dd.amount").text(t)}}]),e}())).addEvent(),console.log(1)})});